/**
 * 动画效果样式
 * 包含过渡、关键帧动画和状态变化效果
 */

/* MD3 标准动画时长 */
:root {
  --md-sys-motion-duration-short1: 50ms;
  --md-sys-motion-duration-short2: 100ms;
  --md-sys-motion-duration-short3: 150ms;
  --md-sys-motion-duration-short4: 200ms;
  --md-sys-motion-duration-medium1: 250ms;
  --md-sys-motion-duration-medium2: 300ms;
  --md-sys-motion-duration-medium3: 350ms;
  --md-sys-motion-duration-medium4: 400ms;
  --md-sys-motion-duration-long1: 450ms;
  --md-sys-motion-duration-long2: 500ms;
  
  /* 标准缓动曲线 */
  --md-sys-motion-easing-standard: cubic-bezier(0.2, 0.0, 0, 1.0);
  --md-sys-motion-easing-standard-accelerate: cubic-bezier(0.3, 0.0, 1.0, 1.0);
  --md-sys-motion-easing-standard-decelerate: cubic-bezier(0.0, 0.0, 0.0, 1.0);
  --md-sys-motion-easing-emphasized: cubic-bezier(0.2, 0.0, 0, 1.0);
  --md-sys-motion-easing-emphasized-accelerate: cubic-bezier(0.3, 0.0, 0.8, 0.15);
  --md-sys-motion-easing-emphasized-decelerate: cubic-bezier(0.05, 0.7, 0.1, 1.0);
}

/* 页面切换动画 */
.page-enter {
  opacity: 0;
  transform: translateY(20px) translateZ(0);
  will-change: transform, opacity;
  transition: 
    transform var(--md-sys-motion-duration-medium3) var(--md-sys-motion-easing-emphasized),
    opacity var(--md-sys-motion-duration-medium3) var(--md-sys-motion-easing-emphasized);
}

.page-enter.page-active {
  transform: translateY(0) translateZ(0);
  opacity: 1;
}

.page-exit {
  opacity: 1;
  transform: translateZ(0);
  will-change: opacity;
  transition: opacity var(--md-sys-motion-duration-medium2) var(--md-sys-motion-easing-standard-accelerate);
  position: absolute;
  width: 100%;
  left: 0;
  top: 0;
  pointer-events: none; /* 添加此行，防止退出页面捕获点击事件 */
}

.page-exit.page-active {
  opacity: 0;
}

/* 添加这个新规则，确保动画完成后清除绝对定位 */
.page-exit-complete {
  position: static;
  width: auto;
  transform: none;
}

#page-actions.active {
  opacity: 1;
  transform: scale(1);
}

/* 按钮动画效果 */
.icon-button .material-symbols-rounded,
.md-button .material-symbols-rounded {
  transition: 
    transform 0.2s var(--md-sys-motion-easing-emphasized), 
    font-variation-settings 0.3s var(--md-sys-motion-easing-standard);
  will-change: transform;
}

/* 刷新按钮动画 */
@keyframes refresh-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.icon-button#refresh-logs.spinning .material-symbols-rounded,
.icon-button#refresh-settings.spinning .material-symbols-rounded {
  animation: refresh-spin 0.8s var(--md-sys-motion-easing-standard) infinite;
}

/* 删除按钮动画 */
@keyframes delete-shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-3px); }
  50% { transform: translateX(0); }
  75% { transform: translateX(3px); }
  100% { transform: translateX(0); }
}

.icon-button#clear-logs:hover .material-symbols-rounded {
  animation: delete-shake 0.4s var(--md-sys-motion-easing-emphasized) forwards;
}

/* 下载按钮动画 */
@keyframes download-bounce {
  0% { transform: translateY(0); }
  50% { transform: translateY(3px); }
  100% { transform: translateY(0); }
}

.icon-button#export-logs:hover .material-symbols-rounded {
  animation: download-bounce 0.4s var(--md-sys-motion-easing-emphasized) forwards;
}

/* 保存按钮动画 */
@keyframes save-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.md-button#save-settings:hover .material-symbols-rounded {
  animation: save-pulse 0.4s var(--md-sys-motion-easing-emphasized) forwards;
}

/* 导航栏动画效果 */
@keyframes nav-overlay-expand {
  0% {
    width: 0;
    opacity: 0;
  }
  100% {
    width: 60px;
    opacity: 1;
  }
}

@keyframes nav-overlay-shrink {
  0% {
    width: 60px;
    opacity: 1;
  }
  100% {
    width: 0;
    opacity: 0;
  }
}

/* 主题切换涟漪动画 */
.theme-ripple {
  position: fixed;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background-color: var(--md-primary);
  transform: scale(0);
  opacity: 0.2;
  z-index: 9999;
  pointer-events: none;
  transition: transform 0.8s var(--md-sys-motion-easing-emphasized);
}

.theme-ripple.active {
  transform: scale(30);
}

/* 优化Toast动画 */
.toast {
  will-change: transform, opacity;
}

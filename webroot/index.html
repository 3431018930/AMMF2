<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMMF</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,0..200" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- 顶部应用栏 -->
        <header class="app-bar">
            <div class="app-bar-start">
                <button id="menu-button" class="icon-button">
                    <span class="material-symbols-outlined">menu</span>
                </button>
                <h1 id="page-title">AMMF</h1>
            </div>
            <div class="app-bar-end">
                <button id="language-button" class="icon-button">
                    <span class="material-symbols-outlined">translate</span>
                </button>
                <button id="theme-button" class="icon-button">
                    <span class="material-symbols-outlined">dark_mode</span>
                </button>
            </div>
        </header>

        <!-- 侧边导航栏 -->
        <nav id="nav-drawer" class="nav-drawer">
            <div class="nav-header">
                <h2>AMMF</h2>
            </div>
            <div class="nav-content">
                <a href="#home" class="nav-item active" data-i18n="WEBUI_SETTINGS_TITLE">
                    <span class="material-symbols-outlined">home</span>
                    <span class="nav-label">首页</span>
                </a>
                <a href="#settings" class="nav-item" data-i18n="WEBUI_SETTINGS_TITLE">
                    <span class="material-symbols-outlined">settings</span>
                    <span class="nav-label">设置</span>
                </a>
                <a href="#system-prop" class="nav-item" data-i18n="WEBUI_SYSTEM_PROP_TITLE">
                    <span class="material-symbols-outlined">build</span>
                    <span class="nav-label">系统属性</span>
                </a>
                <a href="#logs" class="nav-item" data-i18n="WEBUI_LOGS_TITLE">
                    <span class="material-symbols-outlined">article</span>
                    <span class="nav-label">日志</span>
                </a>
                <a href="#about" class="nav-item" data-i18n="WEBUI_ABOUT_TITLE">
                    <span class="material-symbols-outlined">info</span>
                    <span class="nav-label">关于</span>
                </a>
            </div>
        </nav>

        <!-- 语言选择对话框 -->
        <div id="language-dialog" class="dialog">
            <div class="dialog-content">
                <div class="dialog-header">
                    <h2 data-i18n="WEBUI_LANGUAGE_TITLE">可用语言</h2>
                    <button class="icon-button dialog-close">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
                <div class="dialog-body">
                    <div id="language-list" class="language-list">
                        <!-- 语言选项将在这里动态生成 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 遮罩层 -->
        <div id="overlay" class="overlay"></div>

        <!-- 主内容区域 -->
        <main id="main-content" class="main-content">
            <!-- 首页 -->
            <section id="home" class="page active">
                <div class="status-card">
                    <div class="status-header">
                        <h2 data-i18n="WEBUI_STATUS_TITLE">模块状态</h2>
                        <button id="refresh-status" class="button-text" data-i18n="WEBUI_REFRESH_STATUS">刷新</button>
                    </div>
                    <div class="status-content">
                        <div class="status-item">
                            <span data-i18n="WEBUI_STATUS_LABEL">当前状态:</span>
                            <span id="module-status" class="status-value">加载中...</span>
                        </div>
                        <div class="status-item">
                            <span data-i18n="WEBUI_UPTIME_LABEL">运行时间:</span>
                            <span id="module-uptime" class="status-value">加载中...</span>
                        </div>
                    </div>
                    <div class="status-actions">
                        <button id="restart-module" class="button-filled" data-i18n="WEBUI_RESTART_MODULE">重启模块</button>
                    </div>
                </div>

                <div class="card-grid">
                    <a href="#settings" class="feature-card">
                        <span class="material-symbols-outlined">settings</span>
                        <div class="card-content">
                            <h3 data-i18n="WEBUI_SETTINGS_TITLE">模块设置</h3>
                            <p data-i18n="WEBUI_SETTINGS_DESCRIPTION">配置AMMF模块的各项参数</p>
                        </div>
                    </a>
                    <a href="#system-prop" class="feature-card">
                        <span class="material-symbols-outlined">build</span>
                        <div class="card-content">
                            <h3 data-i18n="WEBUI_SYSTEM_PROP_TITLE">系统属性</h3>
                            <p data-i18n="WEBUI_SYSTEM_PROP_DESCRIPTION">编辑system.prop文件中的系统属性</p>
                        </div>
                    </a>
                    <a href="#logs" class="feature-card">
                        <span class="material-symbols-outlined">article</span>
                        <div class="card-content">
                            <h3 data-i18n="WEBUI_LOGS_TITLE">运行日志</h3>
                            <p data-i18n="WEBUI_LOGS_DESCRIPTION">查看模块运行日志</p>
                        </div>
                    </a>
                    <a href="#about" class="feature-card">
                        <span class="material-symbols-outlined">info</span>
                        <div class="card-content">
                            <h3 data-i18n="WEBUI_ABOUT_TITLE">关于</h3>
                            <p data-i18n="WEBUI_ABOUT_DESCRIPTION">查看模块信息和版本</p>
                        </div>
                    </a>
                </div>
            </section>

            <!-- 设置页面 -->
            <section id="settings" class="page">
                <div class="page-header">
                    <h2 data-i18n="WEBUI_SETTINGS_TITLE">模块设置</h2>
                </div>
                <div class="tabs">
                    <button class="tab active" data-target="config-tab" data-i18n="WEBUI_CONFIG_SH_TITLE">模块配置</button>
                    <button class="tab" data-target="settings-tab" data-i18n="WEBUI_SETTINGS_SH_TITLE">模块设置</button>
                </div>
                <div id="config-tab" class="tab-content active">
                    <div class="settings-loading" id="config-loading">
                        <div class="spinner"></div>
                        <p data-i18n="WEBUI_LOADING">加载设置中...</p>
                    </div>
                    <form id="config-form" class="settings-form">
                        <!-- 配置项将在这里动态生成 -->
                    </form>
                    <div class="form-actions">
                        <button type="button" id="save-config" class="button-filled" data-i18n="WEBUI_SAVE">保存</button>
                    </div>
                </div>
                <div id="settings-tab" class="tab-content">
                    <div class="settings-loading" id="settings-loading">
                        <div class="spinner"></div>
                        <p data-i18n="WEBUI_LOADING">加载设置中...</p>
                    </div>
                    <form id="settings-form" class="settings-form">
                        <!-- 设置项将在这里动态生成 -->
                    </form>
                    <div class="form-actions">
                        <button type="button" id="save-settings" class="button-filled" data-i18n="WEBUI_SAVE">保存</button>
                    </div>
                </div>
            </section>

            <!-- 系统属性页面 -->
            <section id="system-prop" class="page">
                <div class="page-header">
                    <h2 data-i18n="WEBUI_SYSTEM_PROP_TITLE">系统属性</h2>
                </div>
                <div class="settings-loading" id="system-prop-loading">
                    <div class="spinner"></div>
                    <p data-i18n="WEBUI_LOADING">加载设置中...</p>
                </div>
                <div id="system-prop-container">
                    <div id="create-prop-container" class="empty-state hidden">
                        <span class="material-symbols-outlined">warning</span>
                        <p data-i18n="WEBUI_SYSTEM_PROP_NOT_FOUND">system.prop文件不存在</p>
                        <p data-i18n="WEBUI_CREATE_SYSTEM_PROP_HINT">您可以创建一个新的system.prop文件来添加系统属性</p>
                        <button id="create-system-prop" class="button-filled" data-i18n="WEBUI_CREATE_SYSTEM_PROP">创建system.prop</button>
                    </div>
                    <div id="no-properties" class="empty-state hidden">
                        <span class="material-symbols-outlined">info</span>
                        <p data-i18n="WEBUI_NO_PROPERTIES">暂无系统属性</p>
                        <p data-i18n="WEBUI_ADD_PROPERTY_HINT">点击下方的"添加属性"按钮添加新的系统属性</p>
                    </div>
                    <form id="system-prop-form">
                        <!-- 属性项将在这里动态生成 -->
                        <div class="form-actions">
                            <button type="button" id="add-property" class="button-outlined">
                                <span class="material-symbols-outlined">add</span>
                                <span data-i18n="WEBUI_ADD_PROPERTY">添加属性</span>
                            </button>
                            <button type="button" id="save-system-prop" class="button-filled" data-i18n="WEBUI_SAVE">保存</button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- 日志页面 -->
            <section id="logs" class="page">
                <div class="page-header">
                    <h2 data-i18n="WEBUI_LOGS_TITLE">运行日志</h2>
                    <div class="page-actions">
                        <div class="search-box">
                            <span class="material-symbols-outlined">search</span>
                            <input type="text" id="log-filter" placeholder="筛选日志" data-i18n-placeholder="WEBUI_FILTER_LOGS">
                        </div>
                        <button id="refresh-logs" class="button-text" data-i18n="WEBUI_REFRESH_LOGS">刷新日志</button>
                        <button id="clear-logs" class="button-text" data-i18n="WEBUI_CLEAR_LOGS">清空日志</button>
                    </div>
                </div>
                <div class="settings-loading" id="logs-loading">
                    <div class="spinner"></div>
                    <p data-i18n="WEBUI_LOADING">加载日志中...</p>
                </div>
                <div id="logs-content">
                    <div id="no-logs" class="empty-state hidden">
                        <span class="material-symbols-outlined">article</span>
                        <p data-i18n="WEBUI_NO_LOGS">暂无日志</p>
                    </div>
                    <pre id="logs-display" class="logs-display hidden"></pre>
                </div>
            </section>

            <!-- 关于页面 -->
            <section id="about" class="page">
                <div class="page-header">
                    <h2 data-i18n="WEBUI_ABOUT_TITLE">关于</h2>
                </div>
                <div class="about-content">
                    <div class="about-logo">
                        <span class="material-symbols-outlined">android</span>
                    </div>
                    <h3 id="module-name">AMMF</h3>
                    <p id="module-version">版本: 1.0.0</p>
                    <p id="module-author">作者: AMMF Team</p>
                    <p data-i18n="WEBUI_ABOUT_INFO">AMMF模块 - 一个Magisk/KernelSU模块框架</p>
                    <div class="about-actions">
                        <a href="https://github.com/AMMF-Team/AMMF" target="_blank" class="button-outlined">
                            <span class="material-symbols-outlined">code</span>
                            <span>GitHub</span>
                        </a>
                    </div>
                </div>
            </section>
        </main>

        <!-- 底部提示 -->
        <div id="snackbar" class="snackbar">
            <span id="snackbar-message"></span>
            <button id="snackbar-action" class="snackbar-action">确定</button>
        </div>

        <!-- 确认对话框 -->
        <div id="confirm-dialog" class="dialog">
            <div class="dialog-content">
                <div class="dialog-header">
                    <h2 id="confirm-title">确认</h2>
                    <button class="icon-button dialog-close">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
                <div class="dialog-body">
                    <p id="confirm-message"></p>
                </div>
                <div class="dialog-actions">
                    <button id="confirm-cancel" class="button-text">取消</button>
                    <button id="confirm-ok" class="button-filled">确定</button>
                </div>
            </div>
        </div>
    </div>

    <script src="utils.js"></script>
    <script src="theme.js"></script>
    <script src="i18n.js"></script>
    <script src="settings.js"></script>
    <script src="system-prop.js"></script>
    <script src="logs.js"></script>
    <script src="about.js"></script>
    <script src="status.js"></script>
    <script src="app.js"></script>
</body>
</html>